# Humanity å¤šè´¦æˆ·å¥–åŠ±è‡ªåŠ¨é¢†å–ç³»ç»Ÿ
æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–é¢†å– Humanity å¥–åŠ±çš„ Node.js ç³»ç»Ÿï¼Œæ”¯æŒå¤šè´¦æˆ·ç®¡ç†ï¼Œå®ç°è‡ªåŠ¨å¾ªç¯é¢†å–å¥–åŠ±çš„åŠŸèƒ½ã€‚

ä¸»è¦ç‰¹æ€§
ğŸš€ â€‹â€‹å¤šè´¦æˆ·æ”¯æŒâ€‹â€‹ï¼šç®¡ç†å¤šä¸ªè´¦æˆ·çš„è®¤è¯ä»¤ç‰Œ
â± â€‹â€‹ç²¾å‡†è°ƒåº¦â€‹â€‹ï¼šæ ¹æ®æ¯ä¸ªè´¦æˆ·çš„ API è¿”å›æ—¶é—´ç²¾ç¡®è®¾ç½®ç­‰å¾…æ—¶é—´
ğŸ“Š â€‹â€‹å®æ—¶ç›‘æ§â€‹â€‹ï¼šæ§åˆ¶å°å®æ—¶æ˜¾ç¤ºæ‰€æœ‰è´¦æˆ·çŠ¶æ€
ğŸ›¡ â€‹â€‹è¿›ç¨‹å®ˆæŠ¤â€‹â€‹ï¼šé€šè¿‡ PM2 ç¡®ä¿è¿›ç¨‹æŒç»­è¿è¡Œ
ğŸ”„ â€‹â€‹è‡ªåŠ¨æ¢å¤â€‹â€‹ï¼šæ„å¤–é€€å‡ºåè‡ªåŠ¨é‡å¯
ğŸ“ â€‹â€‹è¯¦ç»†æ—¥å¿—â€‹â€‹ï¼šå®Œæ•´è®°å½•æ‰€æœ‰æ“ä½œå’Œé”™è¯¯ä¿¡æ¯
ç³»ç»Ÿæ¶æ„
graph TD
    A[ç”¨æˆ·è´¦æˆ·] --> B(è´¦æˆ·é…ç½®æ–‡ä»¶ accounts.json)
    B --> C[ä¸»ç¨‹åº]
    C --> D[PM2è¿›ç¨‹ç®¡ç†å™¨]
    D --> E[æ—¥å¿—æ–‡ä»¶]
    C --> F[Humanity API]
    
    subgraph åŠŸèƒ½æ¨¡å—
        C --> G[è´¦æˆ·è°ƒåº¦å™¨]
        G --> H[å¥–åŠ±é¢†å–æ¨¡å—]
        G --> I[æ—¶é—´è·å–æ¨¡å—]
        G --> J[ç­‰å¾…æ—¶é—´è®¡ç®—]
    end

# å®‰è£…éƒ¨ç½²
å‰ææ¡ä»¶
Ubuntu 18.04+ æˆ–å…¶ä»– Linux ç³»ç»Ÿ
Node.js 18.x
Git
å¿«é€Ÿéƒ¨ç½²
â€‹â€‹ä¸‹è½½éƒ¨ç½²è„šæœ¬â€‹â€‹ï¼š
curl -O https://raw.githubusercontent.com/yourusername/humanity-reward-system/main/deploy.sh
chmod +x deploy.sh
â€‹â€‹è¿è¡Œéƒ¨ç½²è„šæœ¬â€‹â€‹ï¼š
sudo ./deploy.sh
æ‰‹åŠ¨å®‰è£…
â€‹â€‹å…‹éš†ä»“åº“â€‹â€‹ï¼š
git clone https://github.com/yourusername/humanity-reward-system.git
cd humanity-reward-system
â€‹â€‹å®‰è£…ä¾èµ–â€‹â€‹ï¼š
npm install
â€‹â€‹é…ç½®è´¦æˆ·ä¿¡æ¯â€‹â€‹ï¼š
ç¼–è¾‘ accounts.json æ–‡ä»¶ï¼š
[
  {
    "name": "ä¸»è´¦æˆ·",
    "authToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  {
    "name": "å¤‡ç”¨è´¦æˆ·",
    "authToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
]
â€‹â€‹å¯åŠ¨æœåŠ¡â€‹â€‹ï¼š
pm2 start ecosystem.config.js
ä½¿ç”¨è¯´æ˜
å¯åŠ¨åº”ç”¨
./deploy.sh start
æŸ¥çœ‹çŠ¶æ€
./deploy.sh status
æŸ¥çœ‹æ—¥å¿—
./deploy.sh logs
åœæ­¢åº”ç”¨
./deploy.sh stop
é‡å¯åº”ç”¨
./deploy.sh restart
å¸è½½åº”ç”¨
./deploy.sh uninstall
é…ç½®æ–‡ä»¶è¯´æ˜
è´¦æˆ·é…ç½®æ–‡ä»¶ (accounts.json)
å­—æ®µ	æè¿°	å¿…å¡«
name	è´¦æˆ·åç§°ï¼ˆæ˜¾ç¤ºç”¨ï¼‰	æ˜¯
authToken	API è®¤è¯ä»¤ç‰Œ	æ˜¯
PM2 é…ç½®æ–‡ä»¶ (ecosystem.config.js)
é€‰é¡¹	é»˜è®¤å€¼	æè¿°
name	"humanity-reward-system"	åº”ç”¨åç§°
script	"/opt/humanity-reward-system/main.js"	ä¸»å…¥å£æ–‡ä»¶
cwd	"/opt/humanity-reward-system"	å·¥ä½œç›®å½•
watch	false	æ˜¯å¦ç›‘æ§æ–‡ä»¶å˜åŒ–é‡å¯
log_date_format	"YYYY-MM-DD HH:mm:ss"	æ—¥å¿—æ—¶é—´æ ¼å¼
out_file	"./logs/out.log"	æ ‡å‡†è¾“å‡ºæ—¥å¿—æ–‡ä»¶
error_file	"./logs/error.log"	é”™è¯¯æ—¥å¿—æ–‡ä»¶
æ§åˆ¶å°ç•Œé¢
=== å¤šè´¦æˆ·å¥–åŠ±è½®è¯¢ç³»ç»Ÿ (åŸºäºAPIæ—¶é—´è°ƒåº¦) ===
å½“å‰æ—¶é—´: 2025-06-20 10:30:00
è¿è¡ŒçŠ¶æ€: è¿è¡Œä¸­
=========================================
è´¦æˆ·åç§°       çŠ¶æ€                     æ¬¡æ•°    ä½™é¢    ä¸‹æ¬¡é¢†å–æ—¶é—´       ç­‰å¾…æ—¶é—´
ä¸»è´¦æˆ·         ç­‰å¾…é¢†å– (1å°æ—¶30åˆ†15ç§’)  15     32     2025-06-20 12:00:00  1å°æ—¶30åˆ†
å¤‡ç”¨è´¦æˆ·       é¢†å–æˆåŠŸ                  22     41     2025-06-20 15:00:00  4å°æ—¶30åˆ†
=========================================
æŒ‰ Ctrl+C é€€å‡ºç¨‹åº
æ³¨æ„ï¼šæ¯ä¸ªè´¦æˆ·ç‹¬ç«‹è°ƒåº¦ï¼Œæ ¹æ®APIè¿”å›æ—¶é—´ç²¾ç¡®ç­‰å¾…
ç›®å½•ç»“æ„
humanity-reward-system/
â”œâ”€â”€ deploy.sh           # è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ main.js             # ä¸»ç¨‹åº
â”œâ”€â”€ accounts.json        # è´¦æˆ·é…ç½®æ–‡ä»¶
â”œâ”€â”€ ecosystem.config.js # PM2é…ç½®æ–‡ä»¶
â”œâ”€â”€ logs/               # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ out.log         # æ ‡å‡†è¾“å‡ºæ—¥å¿—
â”‚   â””â”€â”€ error.log       # é”™è¯¯æ—¥å¿—
â”œâ”€â”€ node_modules/       # ä¾èµ–æ¨¡å—
â””â”€â”€ package.json        # é¡¹ç›®é…ç½®
æ•…éšœæ’é™¤
å¸¸è§é—®é¢˜
â€‹â€‹éƒ¨ç½²è„šæœ¬å¡åœ¨å®‰è£…ä¾èµ–â€‹â€‹
æ£€æŸ¥ç½‘ç»œè¿æ¥
å°è¯•æ‰‹åŠ¨å®‰è£…ï¼šnpm install -g node@18 pm2
â€‹â€‹åº”ç”¨å¯åŠ¨åç«‹å³é€€å‡ºâ€‹â€‹
æ£€æŸ¥ accounts.json æ ¼å¼
æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼špm2 logs
â€‹â€‹ç­‰å¾…æ—¶é—´æ˜¾ç¤ºå¼‚å¸¸â€‹â€‹
æ£€æŸ¥ API è¿”å›çš„æ—¶é—´æ ¼å¼
å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹åŸå§‹å“åº”
è·å–æ—¥å¿—
# æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
pm2 logs humanity-reward-system --lines 100

# å®æ—¶ç›‘æ§æ—¥å¿—
pm2 monit
